<div class="weight-chart-container">
  <div class="chart-header">
    <h3>{{ babyGender === 'male' ? 'Your Little Boy' : 'Your Little Girl' }}'s Growth Story ðŸ’•</h3>
    <div class="chart-controls">
      <ion-chip [color]="percentileInterpretation.color === '#10b981' ? 'success' : percentileInterpretation.color === '#ef4444' ? 'danger' : 'warning'" size="small" *ngIf="!isLoading && weightRecords.length > 0">
        {{ getSimplePercentileMessage() }}
      </ion-chip>
    </div>
  </div>

  <!-- Loading State -->
  <div class="chart-loading" *ngIf="isLoading">
    <ion-spinner name="crescent" color="primary"></ion-spinner>
    <p>Preparing your baby's growth story... ðŸ’•</p>
  </div>

  <!-- Chart Container -->
  <div #chartContainer class="chart-content" [style.display]="isLoading || chartError ? 'none' : 'block'"></div>

  <!-- Error State -->
  <div class="chart-error" *ngIf="chartError">
    <ion-icon name="heart-dislike-outline"></ion-icon>
    <h4>Oops! Chart Not Loading</h4>
    <p>We're having trouble showing your baby's growth chart right now.</p>
    <ion-button fill="outline" size="small" (click)="initializeChart()">
      Try Again
    </ion-button>
  </div>

  <!-- Empty State -->
  <div class="chart-empty" *ngIf="!isLoading && weightRecords.length === 0">
    <ion-icon name="heart-outline"></ion-icon>
    <h4>Ready to Track Growth! ðŸŒ±</h4>
    <p>Add your baby's weight to see their beautiful growth journey compared to other babies</p>
  </div>

  <!-- Chart Info -->
  <div class="chart-info" *ngIf="!isLoading && weightRecords.length > 0">
    <div class="info-grid">
      <div class="info-item">
        <div class="info-label">How Baby's Doing</div>
        <div class="info-value" [style.color]="percentileInterpretation.color">
          {{ getMotherFriendlyStatus() }}
        </div>
      </div>
      
      <div class="info-item">
        <div class="info-label">Growth Pattern</div>
        <div class="info-value">{{ getMotherFriendlyTrend() }}</div>
      </div>
      
      <div class="info-item">
        <div class="info-label">Weekly Gain</div>
        <div class="info-value">{{ getMotherFriendlyWeightGain() }}</div>
      </div>
    </div>

    <div class="interpretation-card" [style.border-left-color]="percentileInterpretation.color">
      <div class="interpretation-header">
        <ion-icon [name]="percentileInterpretation.color === '#10b981' ? 'heart' : percentileInterpretation.color === '#ef4444' ? 'medical' : 'information-circle'"></ion-icon>
        <h4>{{ getEncouragingTitle() }}</h4>
      </div>
      <p>{{ getEncouragingMessage() }}</p>
    </div>

    <!-- Percentile Legend -->
    <div class="percentile-legend">
      <h5>Understanding Your Baby's Growth ðŸ“Š</h5>
      <div class="legend-grid">
        <div class="legend-item">
          <div class="legend-color" style="background: #fbbf24;"></div>
          <span>ðŸŒ± Smaller babies (perfectly normal!)</span>
        </div>
        <div class="legend-item">
          <div class="legend-color" style="background: #10b981;"></div>
          <span>ðŸŒŸ Average range (most babies)</span>
        </div>
        <div class="legend-item">
          <div class="legend-color" style="background: #8b5cf6;"></div>
          <span>ðŸŒ² Bigger babies (also normal!)</span>
        </div>
      </div>
      <p class="legend-note">
        Every baby grows at their own beautiful pace! This chart shows how your little one compares to other babies their age. 
        Remember: healthy babies come in all sizes! ðŸ’•
      </p>
    </div>
  </div>
</div>