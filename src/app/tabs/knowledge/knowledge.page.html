<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>Knowledge Base</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <div class="content-container">
    
    <!-- Search Bar -->
    <div class="search-section">
      <ion-searchbar
        [(ngModel)]="searchTerm"
        placeholder="Search articles, tips, and guides..."
        (ionInput)="onSearchChange($event)"
        (ionFocus)="onSearchFocus()"
        class="custom-searchbar">
      </ion-searchbar>
    </div>

    <!-- Articles by Category -->
    <div *ngFor="let categoryGroup of categorizedArticles$ | async" class="category-section">
      <div class="section-header">
        <h2 class="section-title">{{ categoryGroup.category.name }}</h2>
        <ion-button 
          fill="clear" 
          size="small" 
          class="see-all-button"
          (click)="onSeeAllCategory(categoryGroup.category.id)">
          SEE ALL
        </ion-button>
      </div>
      
      <div class="horizontal-scroll">
        <div class="articles-grid">
          <div 
            *ngFor="let article of categoryGroup.articles"
            class="article-card grid-item"
            [style.background]="getRandomGradient(article.id)"
            (click)="onArticleSelect(article)">
            <div class="article-image" *ngIf="article.imageUrl">
              <img [src]="article.imageUrl" [alt]="article.title">
            </div>
            <div class="article-content">
              <div class="article-meta">
                <ion-chip [color]="getDifficultyColor(article.difficulty)" size="small">
                  {{ article.difficulty }}
                </ion-chip>
              </div>
              <h3>{{ article.title }}</h3>
              <p>{{ article.summary }}</p>
              <div class="article-footer">
                <span class="read-time">{{ formatReadTime(article.readTime) }}</span>
                <ion-button fill="clear" size="small" class="bookmark-button" (click)="toggleBookmark(article.id, $event)">
                  <ion-icon [name]="isBookmarked(article.id) ? 'bookmark' : 'bookmark-outline'" slot="icon-only"></ion-icon>
                </ion-button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>
</ion-content>